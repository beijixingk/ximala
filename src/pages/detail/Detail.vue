<template>
  <div id="award">
    <div class="page">
      <div class="eG0tZ top dark _leq" style="position: static; margin-top: -56px;">
        <div class="xm-flexbox wrap _leq _3x8d" style="justify-content: space-between;">
          <a class="block _leq" href="/">
            <div class="xm-flexbox-item _3x8d">
              <svg width="36" height="36" class="icon" style="margin-right: 8px;">
                <use xlink:href="#icon-loto_top" />
                <svg id="icon-loto_top" viewBox="0 0 1024 1024">
                  <path
                    d="M819.2 0c113.777778 0 204.8 91.022222 204.8 204.8v614.4c0 113.777778-91.022222 204.8-204.8 204.8H204.8c-113.777778 0-204.8-91.022222-204.8-204.8V204.8C0 91.022222 91.022222 0 204.8 0h614.4z"
                    fill="#FA2800"
                  />
                  <path
                    d="M403.911111 227.555556H278.755556C250.311111 227.555556 227.555556 250.311111 227.555556 278.755556v435.2c0 28.444444 22.755556 51.2 51.2 51.2h51.2c14.222222-2.844444 25.6-11.377778 25.6-28.444445 0-11.377778-11.377778-25.6-25.6-25.6h-25.6c-14.222222 0-25.6-11.377778-25.6-25.6V304.355556c0-14.222222 11.377778-25.6 25.6-25.6h73.955555c14.222222 0 25.6 11.377778 25.6 25.6v412.444444c0 25.6-17.066667 48.355556-42.666667 51.2h42.666667c28.444444 0 51.2-22.755556 51.2-51.2V278.755556c-2.844444-28.444444-25.6-51.2-51.2-51.2z m187.733333 51.2h182.044445c28.444444 0 51.2-22.755556 51.2-51.2h-261.688889c-28.444444 0-51.2 22.755556-51.2 51.2V796.444444c28.444444 0 51.2-22.755556 51.2-51.2v-284.444444h164.977778V796.444444c28.444444 0 51.2-22.755556 51.2-51.2v-284.444444c22.755556-2.844444 42.666667-25.6 42.666666-51.2h-256v-102.4c0-17.066667 11.377778-28.444444 25.6-28.444444z"
                    fill="#FFFFFF"
                  />
                </svg>
              </svg>
              <div class="inlb v-m _leq">
                <div class="eG0uR _leq" style="margin-bottom: 5px;">
                  <span>
                    <svg width="65" height="18" class="icon v-m">
                      <use xlink:href="#icon-logo" />
                      <svg id="icon-logo" viewBox="0 0 4778 1024">
                        <path
                          d="M1085.033113 217.006623c0 40.688742-6.781457 88.15894-94.940398 88.15894H0V210.225166h481.483444V135.629139H0V47.470199h481.483444V0h122.066225v47.470199H1085.033113v6.781457c0 40.688742-6.781457 81.377483-94.940398 81.377483H603.549669v67.81457l481.483444 13.562914z m0 434.013245c0 40.688742-6.781457 88.15894-94.940398 88.15894H0V644.238411h196.662252v-61.033113h-47.470199C67.81457 583.205298 6.781457 528.953642 6.781457 467.92053V352.635762h1071.470199v115.284768c0 67.81457-67.81457 115.284768-142.410596 115.284768h-81.377484v61.033113l230.569537 6.781457z m-6.781457 250.913907c0 67.81457-67.81457 115.284768-142.410596 115.284768H149.192053C67.81457 1017.218543 6.781457 962.966887 6.781457 901.933775v-115.284768h1071.470199v115.284768zM325.509934 644.238411h406.887417v-61.033113h-406.887417v61.033113zM162.754967 488.264901h759.523179c20.344371 0 33.907285-13.562914 33.907284-27.125828v-20.344371H135.629139v20.344371c0 20.344371 13.562914 27.125828 27.125828 27.125828z m0 440.794702h759.523179c20.344371 0 33.907285-13.562914 33.907284-27.125828V881.589404H135.629139v20.344371c0 13.562914 13.562914 27.125828 27.125828 27.125828zM4279.099338 339.072848h176.317881V162.754967h-176.317881V339.072848z m0 284.821192h176.317881V447.576159h-176.317881v176.317881z m0 284.821192h176.317881v-176.317881h-176.317881v176.317881zM4563.92053 0v61.033113H4747.019868V67.81457c0 47.470199-6.781457 101.721854-88.158941 101.721854h-88.15894V339.072848H4747.019868v6.781457c0 47.470199-6.781457 101.721854-88.158941 101.721854h-88.15894v176.317881H4747.019868v6.781457c0 47.470199-6.781457 101.721854-88.158941 101.721854h-88.15894v176.317881H4747.019868v6.781457c0 47.470199-6.781457 101.721854-88.158941 101.721854h-488.264901V0h108.503312v61.033113h176.317881V0h108.503311z m-535.7351 176.317881h-210.225165c-33.907285 0-61.033113-6.781457-81.377484-27.125828-27.125828-27.125828-33.907285-67.81457-33.907284-74.596027H4136.688742v773.086093c0 115.284768-33.907285 176.317881-196.662252 176.317881h-40.688742v-108.503311h40.688742c74.596026 0 81.377483-27.125828 81.377484-74.596027V522.172185h-135.62914c-169.536424 0-189.880795-94.940397-189.880794-176.31788V230.569536h108.503311v115.284769c0 54.251656 0 67.81457 81.377483 67.814569h135.62914V176.317881zM3980.715232 542.516556h20.344371l-169.536424 379.76159c-20.344371 54.251656-61.033113 81.377483-169.536424 81.377483l169.536424-372.980132c27.125828-74.596026 81.377483-88.15894 149.192053-88.158941zM1729.271523 840.900662c-33.907285-13.562914-74.596026-20.344371-115.284768-20.344371-189.880795 0-359.417219 128.847682-393.324503 155.97351v-142.410596c115.284768-81.377483 250.913907-128.847682 386.543046-128.847682 27.125828 0 47.470199 0 74.596027 6.781457 115.284768 13.562914 203.443709 67.81457 278.039735 115.284768 54.251656 33.907285 94.940397 61.033113 135.629139 61.033113 81.377483 0 81.377483-33.907285 81.377483-81.377484V644.238411c0-67.81457-20.344371-88.15894-94.940397-88.158941H1234.225166V189.880795H1356.291391v257.695364h739.178808c135.629139 0 210.225166 67.81457 210.225165 203.443709v183.099337c0 122.066225-74.596026 189.880795-196.662251 189.880795-94.940397 0-155.97351-47.470199-223.78808-94.940397-47.470199-33.907285-94.940397-67.81457-155.97351-88.158941zM1335.94702 115.284768c-94.940397 0-108.503311-81.377483-108.503311-108.503311V0h786.649006c176.317881 0 237.350993 61.033113 237.350994 237.350993v135.629139h-128.847683V264.476821c0-142.410596-20.344371-149.192053-149.192052-149.192053h-637.456954zM3092.344371 61.033113V27.125828h115.284768v27.125828H3526.357616c0 61.033113-54.251656 108.503311-115.284768 108.503311h-637.456954V61.033113h318.728477z m-495.046358 0V0h122.066225v840.900662c0 115.284768-67.81457 176.317881-189.880794 176.317881H2441.324503v-101.721854h67.81457c81.377483 0 88.15894-33.907285 88.15894-74.596027V556.07947H2441.324503c0-54.251656 47.470199-101.721854 108.503312-101.721854h47.470198V162.754967H2441.324503c0-54.251656 47.470199-101.721854 108.503312-101.721854h47.470198z m332.291391 806.993377l-108.503311-623.89404h6.781457c81.377483 0 128.847682 33.907285 142.410596 108.503312l67.814569 393.324503c6.781457 33.907285 0 67.81457-27.125828 94.940397-20.344371 13.562914-47.470199 27.125828-81.377483 27.125828z m366.198675 40.688742H3526.357616v6.781457c0 54.251656-54.251656 101.721854-115.284768 101.721854h-637.456954v-108.503311h325.509934c81.377483 0 128.847682-94.940397 162.754967-223.78808 0-13.562914 61.033113-332.291391 61.033112-339.072847 13.562914-74.596026 54.251656-108.503311 142.410596-108.503312h6.781457v6.781457L3390.728477 698.490066c-20.344371 94.940397-33.907285 142.410596-94.940398 210.225166z"
                          fill="#FA2800"
                        />
                      </svg>
                    </svg>
                    <span class="v-m white">· 想听啥都有</span>
                  </span>
                </div>
                <div class="white eG0uY _leq" style="font-size: 10px;"></div>
              </div>
            </div>
          </a>
          <div class="xm-flexbox-item _3x8d">
            <a
              class="xm-btn tc btn txt-3 eG0tY _leq _dJ"
              to="iting://open?msg_type=13&amp;album_id=25170122"
            ></a>
          </div>
        </div>
      </div>
      <div class="album-page free _WyB">
        <div class="albumInfoWrapper _lX">
          <div class="albumInfo _lX">
            <div class="imgWrapper _lX">
              <div class="xm-album-cover rel cover album-cover _lX _9m">
                <img
                v-if="datas.cover!==undefined"
                  :alt="datas.title"
                  :src="'//imagev2.xmcdn.com/'+datas.cover+'!op_type=3&amp;columns=144&amp;rows=144&amp;magick=webp'"
              />
                <div class="xm-album-cover__wrap _9m">
                  <div class="mask _9m"></div>
                  <div class="play-btn _9m"></div>
                  <div class="play-count _9m">
                    <i class="xm-icon icon-data"></i>&nbsp;
                    <!-- -->
                    {{Count.playCount}}
                  </div>
                  <!-- <span class="albumTag _9m">精品</span> -->
                </div>
              </div>
              <img
                class="picAlbum _lX"
                src="//s1.xmcdn.com/yx/ximalaya-mobile-resource/last/dist/images/listen_pic_album@3x_d18f4f7.png"
              />
            </div>
            <div class="infoWrapper _lX">
              <p class="title ellipsis-2 _lX">{{datas.title}}</p>
              <a class="nameWrapper _lX" >
                <img
                  v-if="userInfos.logo !==undefined"
                  style="width:20px;height:20px;border-radius:50%;vertical-align:middle"
                  alt="剧舞吧配音社"
                  :src="'//imagev2.xmcdn.com/'+userInfos.logo+'!op_type=5&amp;device_type=ios&amp;name=web_meduim&amp;upload_type=cover&amp;magick=webp'"
                />
                <span class="name _lX">{{userInfos.nickname}}</span>
              </a>
              <p class="subscribeWrapper _lX">
                <span class="subscribeCount _lX">
                  已订阅{{Count.subscribeCount}}人
                </span>
                <a to="iting://open?msg_type=13&amp;album_id=25170122">
                  <span class="subscribe _lX">+ 免费订阅</span>
                </a>
              </p>
            </div>
          </div>
          <div
          v-if="datas.cover!==undefined"
            :style="'background-image:url(//imagev2.xmcdn.com/'+datas.cover+'!op_type=3&amp;columns=144&amp;rows=144)'"
            class="xm-bg--blur blurBg _lX _aA"
          ></div>
        </div>
        <h3 class="album-detail ellipisis-2 txt pad-txt tc _jS8" @click="hiddenClick">
          {{datas.salePoint}}
          <!-- -->
          &nbsp;
          <i class="xm-icon icon-arrow-down" style="color:#f86442"></i>
        </h3>
        <div class="rich-box _jS8" :class="{hidden:isHidden}">
          <p
            style="font-size:16px;color:#333333;line-height:30px;font-family:Helvetica,Arial,sans-serif;font-weight:normal;text-align:justify;hyphens:auto"
            data-flag="normal"
            id="richIntros"
          >
          </p>
        </div>
        <a to="iting://open?msg_type=13&amp;album_id=25170122">
          <div class="b3BlH free pulse-run album _aij">打开APP收藏</div>
        </a>

        <div style="padding:15px 15px 0" class="xm-list list-view list-view--split _rp3">
          <div class="list-view__header _rp3">
            <h2 class="list-view__title _rp3"></h2>
            <h2 class="list-track__title bold txt-2 c3">
              节目({{totalCounts}})
              <!-- -->
              <a
                to="iting://open?msg_type=13&amp;album_id=25170122"
                style="font-size:14px;color:#f86442"
                class="fr"
              >
                批量下载
                <i class="xm-icon icon-arrow-right"></i>
              </a>
            </h2>
          </div>
          <ul class="list-view__body _rp3">
            <li class="list-view__item border _rp3" v-for="album in DetailInfos" :key="album.id">
              <a class="track-link__wrap _5RuV">
                <div class="xm-list-track _5RuV">
                  <div class="rel xm-list-track__wrap _5RuV">
                    <i class="xm-icon list-play center-v c9 _5RuV icon-list_play"></i>
                    <div class="titleWrapper _5RuV" @click="handelClick(album.id)">
                      <p class="title c3 txt-1 ellipsis-2 _5RuV">{{album.trackInfo.title}}</p>
                    </div>
                    <i class="xm-icon list-download center-v c9 _5RuV icon-list_download"></i>
                  </div>
                </div>
              </a>
            </li>
          </ul>
          <div class="list-view__footer _rp3"
          @click="getMore"
          :class="{nones : pages === Math.ceil(totalCounts / pageSize )}"
          >
            <p class="load-more tc">
              加载更多
              <i class="xm-icon icon-arrow-down"></i>
            </p>
          </div>
        </div>
        <div class="box _n7l">
          <h2 class="title _n7l">大咖来了</h2>
          <a  class="banner-img _n7l">
            <img
              src="http://fdfs.xmcdn.com/group66/M01/51/DF/wKgMa11RIAOTyiFUAAGbA5MoxxM293.png"
              style="width: 100%;"
            />
          </a>
        </div>
          <div
    style="padding:15px 15px 22px 15px;margin-bottom:10px;background-color:#fff"
    class="xm-list list-view thumbnail list-view--split _rp3"
  >
    <div class="list-view__header _rp3">
      <h2 class="list-view__title _rp3" style="font-size:18px;padding-bottom:10px">相似专辑</h2>
      <div class="tag-bar _MV">
        <a class="xm-tag _MV">
          言情
          <i class="xm-icon icon-album_btn_more"></i>
        </a>
        <a class="xm-tag _MV">
          古言
          <i class="xm-icon icon-album_btn_more"></i>
        </a>
      </div>
    </div>
    <ul class="list-view__body _rp3">
      <li
        style="width:30%"
        class="list-view__item border _rp3"
        v-for="related in relatedInfos"
        :key="related.id"
        @click="detailClick(related.id)"
      >
        <section class="album-wrap _Uf">
          <a class="album-container _Uf">
            <div style="padding-bottom:100%;height:0" class="album-cover rel _Uf">
              <img
                class="img-cover _Uf"
                :src="'//imagev2.xmcdn.com/'+related.albumInfo.cover+'!op_type=3&amp;columns=144&amp;rows=144&amp;magick=webp'"
              />
              <div class="album-cover-panel _Uf">
                <div class="abs info-bar ellipsis _Uf">
                  <svg width="20" height="20" class="icon">
                    <use xlink:href="#icon-play_ic_shound" />
                  </svg>
                  {{related.statCountInfo.playCount}}
                </div>
              </div>
            </div>
            <div class="album-desc _Uf">
              <p class="ellipsis-2 _Uf">{{related.albumInfo.title}}</p>
            </div>
          </a>
        </section>
      </li>

      <a class="hidden _MV more-item _MV">
        <div class="mark-wrap _MV">
          <div class="mark _MV">
            <i class="xm-icon icon-arrow-right"></i>
          </div>
          <p class="tc tit ellipsis _MV">更多有声书</p>
        </div>
      </a>
      <div class="layout-fix _MV"></div>
      <div class="layout-fix _MV"></div>
      <div class="layout-fix _MV"></div>
    </ul>
    <div class="list-view__footer _rp3">
      <div class="go-next__container tc _MV">
        <div class="go-next inlb _MV">
          <i class="xm-icon v-m _MV icon-btn_change" style="font-size:16px;height:100%"></i>
          <span class="v-m _MV">换一批</span>
        </div>
      </div>
    </div>
  </div>
        <div style="padding:15px;margin:10px 0" class="normal-box box _AK">
          <h2 style="margin-bottom:10px" class="box-title _AK">主播信息</h2>
          <div class="xm-anchor _l24">
            <a class="avatar _l24" >
              <img
              v-if="userInfos.logo !==undefined"
                style="border-radius:50%;min-width:54px"
                :src="'//imagev2.xmcdn.com/'+userInfos.logo+'!op_type=5&amp;device_type=ios&amp;name=web_meduim&amp;upload_type=cover&amp;magick=webp'"
              />
              <svg width="27" height="16" class="icon grade _l24">
                <use xlink:href="#icon-individual_blue_V12" />
              </svg>
            </a>
            <div class="inlb v-m xm-anchor-content _l24">
              <a class="ellipsis inlb v-m xm-anchor-link _l24" >
                <h4 class="xm-anchor__nickname _l24">
                  <span class="v-m _l24">{{userInfos.nickname}}</span>
                </h4>
                <p class="info ellipsis _l24">{{userInfos.personalSignature}}</p>
                <p class="fans-info fr _l24">
                  <i class="xm-icon icon-anchor_fans" style="font-size:16px"></i>
                  {{userCount.followerCount}}
                </p>
              </a>
            </div>
            <a to="iting://open?msg_type=12&amp;uid=25590206" class="attentionWrapper _l24">
              <i class="xm-icon attention _l24 icon-attention"></i>
              <p class="attentionContent _l24">加关注</p>
            </a>
          </div>
          <div class="list-container _AK">
            <section
              class="album-wrap _Uf"
              style="width: 27%;"
              v-for="detail in BrieDetailInfos"
              :key="detail.id"
              @click="detailClick(detail.id)"
            >
              <a class="album-container _Uf" >
                <div class="album-cover rel _Uf" style="padding-bottom: 100%; height: 0px;">
                  <img
                    class="img-cover _Uf"
                    :src="'//imagev2.xmcdn.com/'+detail.albumInfo.cover+'!op_type=3&amp;columns=144&amp;rows=144&amp;magick=webp'"
                  />
                  <div class="album-cover-panel _Uf">
                    <div class="abs info-bar ellipsis _Uf">
                      <svg width="20" height="20" class="icon">
                        <use xlink:href="#icon-play_ic_shound" />
                        <svg id="icon-play_ic_shound" viewBox="0 0 1024 1024">
                          <path
                            d="M512 512m-353.28 0a353.28 353.28 0 1 0 706.56 0 353.28 353.28 0 1 0-706.56 0Z"
                            opacity=".4"
                          />
                          <path
                            d="M512 896C302.08 896 128 721.92 128 512S302.08 128 512 128 896 302.08 896 512 721.92 896 512 896z m0-706.56C337.92 189.44 194.56 332.8 194.56 506.88s143.36 317.44 317.44 317.44 317.44-143.36 317.44-317.44-143.36-317.44-317.44-317.44z"
                            fill="#FFFFFF"
                            opacity=".4"
                          />
                          <path
                            d="M471.04 634.88c5.12 0 10.24 0 10.24-5.12l158.72-97.28c5.12-5.12 15.36-10.24 15.36-20.48s-5.12-15.36-10.24-20.48l-153.6-97.28c-5.12-5.12-10.24-5.12-20.48-5.12s-20.48 10.24-20.48 25.6V614.4c0 10.24 10.24 20.48 20.48 20.48z"
                            fill="#FFFFFF"
                          />
                        </svg>
                      </svg>
                      {{detail.statCountInfo.playCount}}
                    </div>
                  </div>
                  <div class="disc _AK"></div>
                </div>
                <div class="album-desc _Uf">
                  <p class="ellipsis-2 _Uf">{{detail.albumInfo.title}}</p>
                </div>
              </a>
            </section>

            <section class="fix _AK"></section>
            <section class="fix _AK"></section>
            <section class="fix _AK"></section>
          </div>
          <div class="friendlink tc _AK">
            <a style="color:#111" >
              进入主页
              <i class="xm-icon icon-arrow-right"></i>
            </a>
          </div>
        </div>
        <div
          style="padding-left:15px;margin-top:35px"
          class="xm-list list-view list-view--split _rp3">
          <div class="list-view__header _rp3">
            <h2 class="list-view__title _rp3">喜马拉雅经典必听</h2>
            <div class="tag-bar _hO7">
              <a class="xm-tag _hO7" >
                商业财经
                <i class="xm-icon icon-album_btn_more"></i>
              </a>
              <a class="xm-tag _hO7" href="/index/home/xiangsheng">
                相声评书
                <i class="xm-icon icon-album_btn_more"></i>
              </a>
              <a class="xm-tag _hO7" >
                娱乐
                <i class="xm-icon icon-album_btn_more"></i>
              </a>
              <a class="xm-tag _hO7">
                头条
                <i class="xm-icon icon-album_btn_more"></i>
              </a>
            </div>
          </div>
          <ul class="list-view__body _rp3">
            <li class="list-view__item border _rp3"
            v-for="listen in listenAlbum"
            :key="listen.id"
            @click="detailClick(listen.id)"
            >
              <a >
                <div class="xm-album clearfix _8vVq">
                  <div
                    style="width:70px;height:70px"
                    class="xm-album-cover rel cover cover _8vVq _9m"
                  >
                    <img
                      class="cover-image _8vVq"
                      :alt="listen.albumInfo.title"
                      :src="'//imagev2.xmcdn.com/'+listen.albumInfo.cover+'!op_type=3&amp;columns=144&amp;rows=144&amp;magick=webp'"
                    />
                    <div class="xm-album-cover__wrap _9m">
                      <div class="mask _9m"></div>
                      <div class="play-btn _9m"></div>
                    </div>
                  </div>
                  <div class="content _8vVq">
                    <h3 class="xm-album__title txt-1 ellipsis _8vVq" style="color:#333">{{listen.albumInfo.title}}</h3>
                    <p class="xm-album__subtitle c9 ellipsis _8vVq">{{listen.albumInfo.salePoint}}</p>
                    <div class="xm-album__info c9 _8vVq">
                      <span class="count _8vVq">
                        <i class="xm-icon icon-ic_classify" style="font-size:14px"></i>{{listen.pageUriInfo.categoryName}}
                      </span>
                      <span class="count _8vVq">
                        <i class="xm-icon icon-ic_play"></i>&nbsp;
                        <!-- -->
                       {{listen.statCountInfo.playCount}}
                      </span>
                      <span class="count _8vVq">
                        <i class="xm-icon icon-sound"></i>&nbsp;
                        <!-- -->
                        {{listen.statCountInfo.trackCount}}
                      </span>
                    </div>
                  </div>
                </div>
              </a>
            </li>
          </ul>
          <div class="list-view__footer _rp3">
            <p class="tc _hO7">
              <a
                class="load-more _hO7"
                to="iting://open?msg_type=57"
                style="margin: 10px auto 15px;"
              >
                查看更多
                <i class="xm-icon icon-arrow-right"></i>
              </a>
            </p>
          </div>
        </div>
      </div>
      <Footer></Footer>
    </div>
    <!-- <div class="tc album-buy-wrap _ZJt">
      <span class="buy-album _ZJt">购买 ￥0.26/集</span>
    </div> -->
    <div class="login-bar _MSg" @click="loginClick" :class="{shrink: isClick}">
      <div class="avatar _MSg">
        <img
          class="head-pic _MSg"
          alt="avatar"
          src="//s1.xmcdn.com/yx/ximalaya-mobile-resource/last/dist/images/cat5_c7004cd.png"
        />
      </div>
      <span class="oper _MSg">
        <span class="user-name v-m _MSg"></span>
        <a class="link _MSg">登录</a>
      </span>
    </div>
  </div>
</template>
<script>
import Footer from "components/mainPage/Footer";
import BScroll from "better-scroll";
import { get } from "utils/http";
import Related from 'pages/detail/Related'
export default {
  data() {
    return {
      isClick: true,
      isHidden: true,
      datas: "",
      richIntro: "",
      Count: 0,
      userInfos: "",
      userCount: 0,
      totalCounts: 0,
      DetailInfos: "",
      BrieDetailInfos: "",
      relatedInfos:'',
      listenAlbum:"",
      anId:'',
      type:'',
      bookId:'',
      fid:'',
      currentPage:0,
      pageSize:0,
      pages:1,
      none:false
    };
  },
  components: {
    Footer,
    Related
  },
  getData(result){
    this.DetailInfos=[
      ...this.DetailInfos,
      ...result.data.trackDetailInfos
    ]
  },
  methods: {
    loginClick() {
      this.isClick = !this.isClick;
    },
    hiddenClick() {
      this.isHidden = !this.isHidden;
    },
    handelClick(id){
      console.log(id);
      let ids = this.$route.params.id;
      this.$router.push(`/play/${ids}/${id}`)
    },
    detailClick(id){
      // console.log(id);
      // let ids = this.$route.params.id;
      this.$router.push(`/detail/${id}/`)
      this.$router.go(0);
      
    },
    async getMore(){
      if(this.pages< Math.ceil(this.totalCounts/this.pageSize)){
        this.pages++
        let pageResult = await get({
          url:
          `/ajax/m-revision/common/album/queryAlbumTrackRecordsByPage?albumId=${this.fid}&page=${this.pages}&pageSize=10&asc=true`
        });
        // this.totalCounts = pageResult.data.totalCount;
        // this.DetailInfos = pageResult.data.trackDetailInfos;
        this.$options.getData.call(this,pageResult)
      }else{
        this.none = true
        console.log('到底了');
        
      }
      
    }
  },
  async mounted() {
    new BScroll("#award", {
      click: true
    });
    let id = this.$route.params.id;
    this.fid = this.$route.params.id
    // console.log(id);
    
    let result = await get({
      // url:`/ajax/mobile/v1/album/share/content?albumId=${id}&tpName=weixin`,
      url:
        `/ajax/m-revision/page/album/v2/queryAlbumPage/${id}?albumCounts=track`
      // headers: {
      //       "Content-Type": "text/plain;charset=UTF-8"
      //   },
    });
    // decodeURIComponent
    this.datas = result.data.albumDetailInfo.albumInfo;
    this.Count = result.data.albumDetailInfo.statCountInfo;
    this.richIntro = result.data.albumRichInfo.richIntro;
    this.anId =  this.datas.anchorId
    document.getElementById("richIntros").innerHTML = this.richIntro;

    let userResult = await get({
      url:
        `/ajax/m-revision/common/user/queryUserInfo/${this.anId}?userCountKeys=follower`
    });
    this.userInfos = userResult.data.userInfo;
    this.userCount = userResult.data.statCountInfo;

    let pageResult = await get({
      url:
        `/ajax/m-revision/common/album/queryAlbumTrackRecordsByPage?albumId=${id}&page=1&pageSize=10&asc=true`
    });
    this.totalCounts = pageResult.data.totalCount;
    let sizes = pageResult.data.pageSize
    this.pageSize = (sizes > this.totalCounts) ? this.totalCounts : sizes
    this.DetailInfos = pageResult.data.trackDetailInfos;
    this.type = this.DetailInfos[0].pageUriInfo.categoryCode
    console.log(this.type);
    
    // this.bookId = this.DetailInfos[0]


    let anchorResult = await get({
      url:
        `/ajax/m-revision/common/anchor/queryAnchorAlbumsByPage?anchorId=${this.anId}&page=1&pageSize=3&asc=false`
    });
    this.BrieDetailInfos = anchorResult.data.albumBriefDetailInfos;

    let relatedResult = await get({
      url:`/ajax/m-revision/common/album/queryAlbumRelatedRecommendAlbums?albumId=${id}&page=1&pageSize=6`
    })
    this.relatedInfos = relatedResult.data.albumBriefDetailInfos

    let listen = await get({
      url:'/ajax/m-revision/common/album/queryClassicListenAlbums'
    })
    this.listenAlbum = listen.data
  }
};
</script>
<style lang="stylus" scoped>
#award {
  max-height: 100%;
  margin-top: 56px;
  background: #fff;
}
.nones
  display none


.login-bar .avatar._MSg {
  width: 48px !important;
  height: 46px !important;
  left: 99% !important;
}

.head-pic._MSg {
  padding-top: 1px;
}

.login-bar._MSg {
  height: 46px !important;
}

.login-bar .oper._MSg {
  line-height: 40px !important;
}
</style>